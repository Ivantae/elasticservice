<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1"/>
		
		<!--  jQuery Mobile 1.4.2 CDN -->
<!-- 		<link rel="stylesheet" href="jqm/1.4.2/css/themes/default/jquery.mobile-1.4.2.min.css" /> -->
<!-- 		<script src="jq/jquery-1.9.1.min.js"></script> -->
<!-- 		<script src="jqm/1.4.2/js/jquery.mobile-1.4.2.min.js"></script> -->
		
		<!--  jQuery Mobile 1.3.2 CDN -->
		<link rel="stylesheet" href="../html5/jqm/1.3.2/css/themes/default/jquery.mobile-1.3.2.min.css" />
		<script src="../html5/jq/jquery-1.9.1.min.js"></script>
		<script src="../html5/jqm/1.3.2/js/jquery.mobile-1.3.2.min.js"></script>
		<script src="../html5/elastic-init-1.4.3.jsp"></script>
		<script src="../html5/elastic-util-1.5.js"></script>
</head>
<BODY>
	<div data-role="page">
		<div data-role="header">
			<h1>Run a SQL query in background</h1>
			<a href="javascript:window.history.go(-1)" data-theme="a" data-ajax="false">Home</a>
		</div>
		
		<div data-role="content">
		<UL>
			<LI><B>XML : </B> /WEB-INF/elastic/bean-sample.xml<BR>
				<textarea>
	<!--
		Running a SQL query in background
			. runs given SQL by periods.
			. Parameters
				- sqlConnPoolMgr: DB Connection Pool Manager Bean
				- sqlConnPoolName: DB Connection Pool Name
				- sqlId: ID of SQL statement
				- Map: Parameters Map for the SQL. Omittable
	-->
	<cronjob id="Sample_SqlRunCronjob1" class="elastic.util.beanmgr.bean.SqlRunner" enable="true">
		<timeTable>
			<daily>
				<hour>16</hour>
				<minute>30</minute>
			</daily>
		</timeTable>
		<constructor-arg>
			<ref bean="sqlConnPoolMgr" />
			<String name="sqlConnPoolName">default</String>
			<String name="sqlId">sample.sql1</String>
			<Map>
				<String key="aaa">AAAA</String>
				<boolean key="bbb">true</boolean>
				<int key="ccc">123</int>
				<long key="ddd">1234567</long>
			</Map>
		</constructor-arg>
	</cronjob></textarea>
			</LI>
			<P>
			<LI><B>SQL XML :</B> /WEB-INF/elastic/sql/SampleSql.xml<BR>
				<textarea>
<sqlMap namespace="sample">
	<statement id="sql1" >
    		SELECT 
				#{AAA} AS AAA, 
				#{BBB} AS BBB
	</statement>
</sqlMap></textarea>
			</LI>
			<P>
		</UL>
		</div>
	</div>
</BODY>
</HTML>
