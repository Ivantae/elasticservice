package elasticservice.web.play

import com.google.inject.ImplementedBy
import com.typesafe.scalalogging.LazyLogging

import javax.inject.Singleton
import play.api.Play
import play.api.Play.current

@ImplementedBy(classOf[PlayConfiguratorAfterApp])
trait Configurator

/**
 * elastic.xml 파일 경로는 다음의 단계로 찾으며 먼저 발견되는 파일이 사용됩니다.
 *
 * 1) application.conf에
 *    - elasticXml= 정의
 *
 * 2) 시스템 환경변수 elasticXml 정의
 *
 * 3) Play Application root 디렉토리에 elastic.xml 두기
 */
@Singleton
class PlayConfiguratorAfterApp extends Configurator with LazyLogging {

  PlayConfigListener.loadElasticConf(Play.configuration, Play.application.path)
}